- unless 'registrations passwords sessions'.include? controller.controller_name
  %span
    - if user_signed_in?
      %a.btn{data:{toggle: 'modal'}, href: '#userModal', role: 'button'}
        %i.icon-user
        = current_user.name
      - content_for :modal_content do
        #userModal.modal.hide.fade{aria:{hidden: 'true'}, aria:{labelledby: 'userModalLabel'}, role: 'dialog', tabindex: '-1'}
          .modal-header
            %button.close{aria:{hidden: 'true'}, data:{dismiss: 'modal'}, type: 'button'} ×
            %h3#userModalLabel
              = current_user.name
          .modal-body
            = link_to 'Sign out', destroy_user_session_path, method:  :delete, confirm: 'You sure?'
            %div
              %span.badge.badge-inverse
                %i.icon-comment.icon-white
                = current_user.comments_count
              %span.badge.badge-inverse
                %i.icon-thumbs-up.icon-white
                = current_user.likes_count
            %div
              = link_to 'Edit profile', edit_user_registration_path
          .modal-footer
            %button.btn{aria:{hidden: 'true'}, data:{dismiss: 'modal'}} Close

    - else
      %a.btn{data:{toggle: 'modal'}, href: '#userModal', role: 'button'}
        %i.icon-edit
        login / reg
      - content_for :modal_content do
        #userModal.modal.hide.fade{aria:{hidden: 'true'}, aria:{labelledby: 'userModalLabel'}, role: 'dialog', tabindex: '-1'}
          .modal-header
            %button.close{aria:{hidden: 'true'}, data:{dismiss: 'modal'}, type: 'button'} ×
            %h3#userModalLabel
              Register or login
          .modal-body
            = form_for(resource, as: resource_name, url: session_path(resource_name)) do |f|
              %div
                .control-group
                  .controls
                    .input-prepend
                      %span.add-on
                        %label.control-label{for: 'user_email'}
                          %i.icon-envelope
                      = f.email_field :email, autofocus: true, placeholder: 'Enter your email'
              %div
                .control-group
                  .controls
                    .input-prepend
                      %span.add-on
                        %label.control-label{for: 'user_password'}
                          %i.icon-lock
                      = f.password_field :password, placeholder: 'Enter your password'

              - if devise_mapping.rememberable?
                %div
                  .control-group
                    .controls
                      .input-prepend
                        %span.add-on
                          %label.control-label{for: 'user_remember_me'}
                            %i.icon-time
                        %span.add-on
                          %label{for: 'user_remember_me', style: 'width: 206px;'}
                            = f.check_box :remember_me, placeholder: 'Enter your email'
                            %span Remember me
              %div
                = link_to new_user_registration_path, class: 'btn btn-large btn-success' do
                  %i.icon-pencil
                  %span{style: 'color: #000000;'} Register
                = f.submit 'Login', class: 'btn btn-large btn-inverse'
                %br
                %br
                = link_to user_omniauth_authorize_path(:facebook), class: 'btn btn-link' do
                  = image_tag '/assets/facebook.png', width: 40
                  Login with
                  %b facebook
          .modal-footer
            %button.btn{aria:{hidden: 'true'}, data:{dismiss: 'modal'}} Close